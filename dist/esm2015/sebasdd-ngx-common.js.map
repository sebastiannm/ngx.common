{"version":3,"file":"sebasdd-ngx-common.js","sources":["../../src/blog/blog-utils.ts","../../src/geoip/geoip.service.ts","../../src/dynamic-image/dynamic-image.component.ts","../../src/dynamic-image/dynamic-image.module.ts","../../src/blog/safe-html.pipe.ts","../../src/swiper/swiper.directive.ts"],"sourcesContent":["export class BlogUtils {\n  public static massageText(htmlString: any, isMobile: boolean): string {\n    if (!htmlString) { return (htmlString = ''); }\n    const textElement = document.createElement('div');\n    textElement.innerHTML = htmlString;\n    const imgs = textElement.querySelectorAll('img');\n    for (let i = 0; i < imgs.length; i++) {\n      imgs.item(i).src = imgs\n        .item(i)\n        .src.replace('downloads.contentful', 'images.contentful');\n\n      if (!imgs.item(i).src.includes('.gif')) {\n        if (isMobile) {\n          imgs.item(i).src += '?w=700';\n        } else {\n          imgs.item(i).src += '?w=1500';\n        }\n      }\n    }\n    const as = textElement.querySelectorAll('a');\n    for (let i = 0; i < as.length; i++) {\n      as.item(i).setAttribute('target', '_blank');\n    }\n\n    return textElement.innerHTML;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { refCount, publishReplay } from 'rxjs/operators';\nimport { Observable } from 'rxjs/Observable';\n\n@Injectable()\nexport class GeoIpService {\n\n  constructor(private http: HttpClient) {}\n\n  public get(): Observable<any> {\n    const url: string = 'https://api.sebastianmoreno.se/api/geoip';\n    return this.http.get(url)\n      .pipe(\n        publishReplay(1),\n        refCount()\n      );\n  }\n}\n","import { Component, Input, OnInit, OnDestroy, ElementRef } from '@angular/core';\n\n@Component({\n  selector: 'dynamic-image',\n  template: `\n  <div [class.loaded]=\"loaded\" class=\"dynamic-image-content {{align}} {{sizemode}} {{mainSide}}\">\n    <div [style.paddingBottom]=\"spacerStyle\" class=\"spacer\"></div>\n    <img [src]=\"imgUrl\" *ngIf=\"imgUrl\" class=\"large\"/>\n  </div>\n  `,\n  styles: [`\n    \\:host {\n      display: block;\n    }\n\n    .dynamic-image-content {\n      position: relative;\n      overflow: hidden;\n      box-sizing: border-box;\n    }\n\n    .dynamic-image-content.absolute {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n    }\n\n    .dynamic-image-content pre {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: white;\n      padding: 0;\n      font-size: .75em;\n      line-height: 1.6em;\n    }\n\n    .dynamic-image-content img {\n      position: absolute;\n      padding: 0;\n      margin: 0;\n      line-height: 0;\n    }\n\n    .dynamic-image-content img.small {\n      opacity: 1;\n    }\n\n    .dynamic-image-content img.large {\n      opacity: 0;\n      transition: opacity .75s;\n    }\n\n    .dynamic-image-content.noplaceholder img.small {\n      visibility: hidden;\n    }\n\n    .dynamic-image-content.fit.height img {\n      height: 100%;\n    }\n\n    .dynamic-image-content.fit.width img {\n      width: 100%;\n    }\n\n    .dynamic-image-content.fit.autoheight {\n      line-height: 0;\n    }\n\n    .dynamic-image-content.fit.autoheight .spacer {\n      display: none;\n    }\n\n    .dynamic-image-content.fit.autoheight img {\n      position: relative;\n      left: initial;\n      right: initial;\n      bottom: initial;\n      top: initial;\n      transform: none;\n      height: 100%;\n      width: auto;\n    }\n\n    .dynamic-image-content.fit.autowidth img {\n      position: absolute;\n      width: 100%;\n    }\n\n    .dynamic-image-content.crop.height img {\n      height: 100%;\n      max-width: initial;\n    }\n\n    .dynamic-image-content.crop.width img {\n      width: 100%;\n      max-height: initial;\n    }\n\n    .dynamic-image-content.loaded img {\n      border: 0;\n    }\n\n    .dynamic-image-content.loaded img.large {\n      opacity: 1;\n    }\n\n    .dynamic-image-content.loaded img.small {\n      opacity: 0;\n      position: absolute;\n    }\n\n    .dynamic-image-content.center img {\n      left: 50%;\n      right: initial;\n      top: 50%;\n      bottom: initial;\n      transform: translateX(-50%) translateY(-50%);\n    }\n\n    .dynamic-image-content.left.center img {\n      top: 50%;\n      right: initial;\n      left: 0;\n      bottom: initial;\n      transform: translateX(0%) translateY(-50%);\n    }\n\n    .dynamic-image-content.right.center img {\n      top: 50%;\n      right: 0;\n      left: initial;\n      bottom: initial;\n      transform: translateX(0%) translateY(-50%);\n    }\n\n    .dynamic-image-content.left.top img {\n      top: 0;\n      right: initial;\n      bottom: initial;\n      left: 0;\n      transform: translateX(0%) translateY(0%);\n    }\n\n    .dynamic-image-content.center.top img {\n      top: 0;\n      right: initial;\n      bottom: initial;\n      left: 50%;\n      transform: translateX(-50%) translateY(0%);\n    }\n\n    .dynamic-image-content.right.top img {\n      top: 0;\n      right: 0;\n      bottom: initial;\n      left: initial;\n      transform: translateX(0%) translateY(0%);\n    }\n\n    .dynamic-image-content.left.bottom img {\n      top: initial;\n      right: initial;\n      bottom: 0;\n      left: 0;\n      transform: translateX(0%) translateY(0%);\n    }\n\n    .dynamic-image-content.center.bottom img {\n      top: initial;\n      right: initial;\n      bottom: 0;\n      left: 50%;\n      transform: translateX(-50%) translateY(0%);\n    }\n\n    .dynamic-image-content.right.bottom img {\n      top: initial;\n      right: 0;\n      bottom: 0;\n      left: initial;\n      transform: translateX(0%) translateY(0%);\n    }\n  `]\n})\nexport class DynamicImageComponent implements OnInit, OnDestroy {\n\n  @Input() public url: string;\n  @Input() public resolution: any;\n  @Input() public align: string = 'center center';\n  @Input() public sizemode: string = 'fit';\n  @Input() public scale: number = 1;\n  public loaded: boolean = false;\n  public spacerStyle: any;\n  public assetRatio: number;\n  public mainSide: string;\n  public imgUrl: string;\n  private wrapperRatio: number;\n  private width: number;\n  private height: number;\n  private servingUrl: string;\n  private servingSize: any;\n  private timeoutFunc: any;\n\n  constructor(\n    private elem: ElementRef\n  ){ }\n\n  public ngOnInit() {\n    this.assetRatio = this.resolution.width / this.resolution.height;\n    this.spacerStyle = `${this.resolution.height / this.resolution.width * 100}%`;\n\n    this.timeoutFunc = setTimeout(() => {\n      this.getSize();\n\n      if (this.height > 0 && this.width == 0) {\n        this.mainSide = 'autoheight';\n      } else if (this.width > 0 && this.height === 0) {\n        this.mainSide = 'autowidth';\n      } else {\n        if (this.sizemode === 'crop') {\n          this.mainSide = this.assetRatio > 1 ? 'height' : 'width';\n        } else {\n          this.mainSide = this.assetRatio < 1 ? 'height' : 'width';\n        }\n      }\n\n      this.resize();\n      this.getServingUrl();\n    });\n  }\n\n  public ngOnDestroy() {\n    clearTimeout(this.timeoutFunc);\n  }\n\n  private getSize() {\n    this.width  = this.elem.nativeElement.children[0].clientWidth;\n    this.height = this.elem.nativeElement.children[0].clientHeight;\n  }\n\n  private getServingUrl() {\n    let servingSize: any;\n\n    if (this.mainSide === 'autoheight') {\n      servingSize = Math.round(Math.max(this.height, this.height * this.assetRatio));\n    } else if (this.sizemode === 'crop' && this.height) {\n      if (this.assetRatio <= this.wrapperRatio) {\n        servingSize = Math.round(Math.max(this.width, this.width / this.assetRatio));\n      } else {\n        servingSize = Math.round(Math.max(this.height, this.height * this.assetRatio));\n      }\n    } else {\n      if (this.assetRatio <= this.wrapperRatio && this.height) {\n        servingSize = Math.round(Math.max(this.height, this.height * this.assetRatio));\n      } else {\n        servingSize = Math.round(Math.max(this.width, this.width / this.assetRatio));\n      }\n    }\n    servingSize = Math.min(servingSize * (Math.ceil(window.devicePixelRatio) || 1), 4000);\n    servingSize = parseInt(servingSize, 10);\n\n    if (servingSize === this.servingSize) {\n      this.loaded = true;\n      return;\n    }\n\n    this.servingSize = Math.max(servingSize, 60);\n    this.servingUrl = this.url + '?w=' + (this.servingSize * this.scale);\n\n    this.render();\n  }\n\n  private resize() {\n    if (this.mainSide !== 'autoheight' && this.mainSide !== 'autowidth') {\n      this.wrapperRatio = this.width / this.height;\n      if (this.sizemode === 'crop') {\n        this.mainSide = this.assetRatio < this.wrapperRatio ? 'width' : 'height';\n      } else {\n        this.mainSide = this.assetRatio > this.wrapperRatio ? 'width' : 'height';\n      }\n    }\n  }\n\n  private render(): void {\n    const img: any = new Image();\n\n    img.onload = () => {\n      this.imgUrl = this.servingUrl;\n      this.loaded = true;\n    };\n\n    img.src = this.servingUrl;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DynamicImageComponent } from './dynamic-image.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    DynamicImageComponent\n  ],\n  declarations: [\n    DynamicImageComponent\n  ],\n  providers: [],\n})\nexport class DynamicImageModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'pipe-safeHtml'\n})\n\nexport class SafeHtmlPipe implements PipeTransform {\n  constructor(\n    private sanitizer: DomSanitizer\n  ) {}\n\n  public transform(value: any, args: any[]): SafeStyle {\n    if (!value) { return ''; }\n    return this.sanitizer.bypassSecurityTrustHtml(value);\n  }\n}\n","declare const Swiper: any;\nimport { Directive, ElementRef, OnInit, Input } from '@angular/core';\n\n@Directive({ selector:  '[swiper]' })\n\nexport class SwiperDirective implements OnInit {\n\n  @Input() public swiper = {};\n\n  constructor(\n    private elem: ElementRef\n  ) {}\n\n  public ngOnInit() {\n    setTimeout(() => {\n      const slider = new Swiper(this.elem.nativeElement, this.swiper);\n    });\n  }\n\n}\n"],"names":["http"],"mappings":"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"}